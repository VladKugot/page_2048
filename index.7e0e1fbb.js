const t=new class{constructor(t){this.size=4,this.score=0,this.status="idle",this.board=t||Array.from({length:4},()=>[,,,,].fill(0))}updateBoard(){let t=document.getElementById("game-board").querySelector("tbody");t.innerHTML="";for(let e=0;e<this.size;e++){let s=document.createElement("tr");for(let t=0;t<this.size;t++){let i=this.board[e][t],r=document.createElement("td");r.classList.add("field-cell"),i?(r.classList.add(`field-cell--${i}`),r.textContent=i):r.textContent="",s.appendChild(r)}t.appendChild(s)}}moveLeft(){let t=!1;for(let e=0;e<this.size;e++){let s=[];for(let t=0;t<this.size;t++){let i=this.board[e][t];0!==i&&s.push(i)}for(let t=0;t<s.length-1;t++)s[t]===s[t+1]&&(s[t]*=2,this.score+=s[t],s.splice(t+1,1));for(;s.length<this.size;)s.push(0);for(let i=0;i<this.size;i++)this.board[e][i]!==s[i]&&(this.board[e][i]=s[i],t=!0)}return t&&(this.addRandomTile(),this.updateBoard()),this.score}moveRight(){let t=!1;for(let e=0;e<this.size;e++){let s=[];for(let t=this.size-1;t>=0;t--){let i=this.board[e][t];0!==i&&s.push(i)}for(let t=0;t<s.length-1;t++)s[t]===s[t+1]&&(s[t]*=2,this.score+=s[t],s.splice(t+1,1));for(;s.length<this.size;)s.push(0);for(let i=this.size-1;i>=0;i--){let r=s[this.size-1-i];this.board[e][i]!==r&&(this.board[e][i]=r,t=!0)}}return t&&(this.addRandomTile(),this.updateBoard()),this.score}moveUp(){let t=!1;for(let e=0;e<this.size;e++){let s=[];for(let t=0;t<this.size;t++){let i=this.board[t][e];0!==i&&s.push(i)}for(let t=0;t<s.length-1;t++)s[t]===s[t+1]&&(s[t]*=2,this.score+=s[t],s.splice(t+1,1));for(;s.length<this.size;)s.push(0);for(let i=0;i<this.size;i++)this.board[i][e]!==s[i]&&(this.board[i][e]=s[i],t=!0)}return t&&(this.addRandomTile(),this.updateBoard()),this.score}moveDown(){let t=!1;for(let e=0;e<this.size;e++){let s=[];for(let t=this.size-1;t>=0;t--){let i=this.board[t][e];0!==i&&s.push(i)}for(let t=0;t<s.length-1;t++)s[t]===s[t+1]&&(s[t]*=2,this.score+=s[t],s.splice(t+1,1));for(;s.length<this.size;)s.push(0);for(let i=this.size-1;i>=0;i--){let r=s[this.size-1-i];this.board[i][e]!==r&&(this.board[i][e]=r,t=!0)}}return t&&(this.addRandomTile(),this.updateBoard()),this.score}getScore(){return this.score}getState(){return this.board}getStatus(){return this.status}start(){"idle"===this.status&&(this.status="playing",this.addRandomTile(),this.addRandomTile(),this.updateBoard())}addRandomTile(){let t=[];for(let e=0;e<this.size;e++)for(let s=0;s<this.size;s++)0===this.board[e][s]&&t.push([e,s]);if(0===t.length)return;let[e,s]=t[Math.floor(Math.random()*t.length)];this.board[e][s]=.9>Math.random()?2:4}restart(){this.board=Array.from({length:4},()=>[,,,,].fill(0)),this.score=0,this.status="playing",this.addRandomTile(),this.addRandomTile(),this.updateBoard()}isGameOver(){for(let t=0;t<this.size;t++)for(let e=0;e<this.size;e++){if(0===this.board[t][e])return!1;let s=this.board[t][e];if(t<this.size-1&&this.board[t+1][e]===s||e<this.size-1&&this.board[t][e+1]===s)return!1}return!0}},e=document.querySelector(".game-score"),s=document.querySelector(".button.start"),i=document.querySelector(".message");function r(){let e=document.querySelectorAll(".field-cell"),s=t.getState(),r=!1;e.forEach((t,e)=>{let i=s[Math.floor(e/4)][e%4];t.textContent=0===i?"":i,t.className=`field-cell field-cell--${i}`,2048===i&&(r=!0)}),r&&(i.classList.remove("message-start"),i.textContent="Winner! Congrats! You did it!",i.className="message message-win")}s.addEventListener("click",()=>{"idle"===t.getStatus()?(t.start(),s.textContent="restart",s.classList.add("restart")):(t.restart(),e.textContent="0"),r(),i.textContent="",i.className="message hidden"}),document.addEventListener("keydown",s=>{if("playing"!==t.getStatus())return;let o=0;switch(s.key){case"ArrowUp":o=t.moveUp();break;case"ArrowDown":o=t.moveDown();break;case"ArrowLeft":o=t.moveLeft();break;case"ArrowRight":o=t.moveRight();break;default:return}e.textContent=o,r(),t.isGameOver()&&(i.textContent="You lose! Restart the game?",i.className="message message-lose",t.status="lost")});
//# sourceMappingURL=index.7e0e1fbb.js.map
